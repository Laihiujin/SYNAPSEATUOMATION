# OpenManus Agent å·¥å…·ç³»ç»Ÿæ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. **UI ä¼˜åŒ–**
- âœ… å°† AI åŠ©æ‰‹å¤´åƒä»ç²‰è‰²æ¸å˜åœ†åœˆæ”¹ä¸ºå°æœºå™¨äººå›¾æ ‡ ğŸ¤–
- âœ… ç”¨æˆ·å¤´åƒä½¿ç”¨ç”¨æˆ·å›¾æ ‡ ğŸ‘¤
- âœ… ç§»é™¤äº†æ¬¢è¿æ¶ˆæ¯ä¸­çš„ç¤ºä¾‹æç¤º
- âœ… ç®€åŒ–äº†ç•Œé¢ï¼Œæ›´åŠ ç®€æ´

### 2. **åˆ›å»ºäº† 7 ä¸ªå¼ºå¤§çš„è‡ªå®šä¹‰å·¥å…·**

| å·¥å…·åç§° | åŠŸèƒ½ | API ç«¯ç‚¹ |
|---------|------|---------|
| `call_api` | **é€šç”¨ API è°ƒç”¨å™¨** | ä»»æ„ç«¯ç‚¹ |
| `list_accounts` | åˆ—å‡ºç¤¾äº¤åª’ä½“è´¦å· | `/api/v1/accounts` |
| `list_assets` | åˆ—å‡ºè§†é¢‘ç´ æ | `/api/v1/files/videos` |
| `create_publish_plan` | åˆ›å»ºå‘å¸ƒè®¡åˆ’ | `/api/v1/publish/plans` |
| `list_publish_plans` | åˆ—å‡ºå‘å¸ƒè®¡åˆ’ | `/api/v1/publish/plans` |
| `get_task_status` | è·å–ä»»åŠ¡çŠ¶æ€ | `/api/v1/tasks/{task_id}` |
| `get_system_context` | è·å–ç³»ç»Ÿä¸Šä¸‹æ–‡ | `/api/v1/agent/context` |

### 3. **ä¿®å¤çš„é—®é¢˜**
- âœ… ä¿®å¤äº† `SaveScriptTool` æœªå®šä¹‰çš„é”™è¯¯
- âœ… ä¿®å¤äº† API ç«¯å£é…ç½®ï¼ˆä» 8000 æ”¹ä¸º 7000ï¼‰
- âœ… æ›´æ–°äº†å·¥å…·å¯¼å…¥å’Œåˆå§‹åŒ–
- âœ… Agent æˆåŠŸåˆå§‹åŒ–ï¼Œå·¥å…·æ•°é‡ï¼š12 ä¸ªï¼ˆ5 ä¸ªå†…ç½® + 7 ä¸ªè‡ªå®šä¹‰ï¼‰

## âš ï¸ å½“å‰é—®é¢˜

### é—®é¢˜ï¼šAgent æ‰§è¡Œè¶…æ—¶

**ç°è±¡**ï¼š
- Agent èƒ½å¤ŸæˆåŠŸåˆå§‹åŒ–
- å·¥å…·éƒ½å·²æ­£ç¡®åŠ è½½
- ä½†æ˜¯æ‰§è¡Œä»»åŠ¡æ—¶è¶…æ—¶ï¼ˆ120ç§’ï¼‰

**åŸå› **ï¼š
```
ä½¿ç”¨çš„æ¨¡å‹ï¼šQwen/QwQ-32B
è¿™æ˜¯ä¸€ä¸ª"æ…¢æ€è€ƒ"æ¨¡å‹ï¼Œä¸“é—¨è®¾è®¡ç”¨äºå¤æ‚æ¨ç†
æ¯ä¸€æ­¥éƒ½ä¼šè¿›è¡Œæ·±åº¦æ€è€ƒï¼Œå¯¼è‡´å“åº”æ—¶é—´å¾ˆé•¿
```

**æ—¥å¿—è¯æ®**ï¼š
```
2025-12-02 17:46:56.978 | INFO | âœ¨ Manus's thoughts: ä½ å¥½ï¼ä¼¼ä¹ä½ é‡å¤è¾“å…¥äº†ç³»ç»Ÿæç¤ºè¯´æ˜...
2025-12-02 17:46:56.978 | INFO | ğŸ› ï¸ Manus selected 0 tools to use
2025-12-02 17:46:56.978 | INFO | Executing step 4/20
```

Agent åœ¨ä¸æ–­æ€è€ƒï¼Œä½†æ²¡æœ‰é€‰æ‹©å·¥å…·æ‰§è¡Œã€‚

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šæ›´æ¢ä¸ºå¿«é€Ÿæ¨¡å‹ï¼ˆæ¨èï¼‰

å°† Agent æ¨¡å‹ä» `Qwen/QwQ-32B` æ”¹ä¸º `Qwen/Qwen2.5-72B-Instruct`ï¼š

**ä¼˜åŠ¿**ï¼š
- âœ… å“åº”é€Ÿåº¦å¿«ï¼ˆ3-10ç§’ï¼‰
- âœ… æ›´æ“…é•¿å·¥å…·è°ƒç”¨
- âœ… æ›´é€‚åˆ Agent åœºæ™¯
- âœ… æˆæœ¬æ›´ä½

**æ“ä½œæ­¥éª¤**ï¼š
1. æ‰“å¼€å‰ç«¯ï¼šhttp://localhost:3000/ai-agent/settings
2. æ‰¾åˆ° "OpenManus Agent é…ç½®"
3. å°†æ¨¡å‹æ”¹ä¸ºï¼š`Qwen/Qwen2.5-72B-Instruct`
4. ä¿å­˜é…ç½®

### æ–¹æ¡ˆ 2ï¼šå¢åŠ è¶…æ—¶æ—¶é—´

å¦‚æœåšæŒä½¿ç”¨ QwQ-32Bï¼Œéœ€è¦ï¼š

1. ä¿®æ”¹å‰ç«¯è¶…æ—¶ï¼š
```typescript
// src/components/ai-chat/chat.tsx
const response = await fetch("/api/v1/agent/manus-run", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ 
        goal: value,
        context: {},
        timeout: 300  // å¢åŠ åˆ° 5 åˆ†é’Ÿ
    })
})
```

2. ä¿®æ”¹åç«¯è¶…æ—¶ï¼š
```python
# fastapi_app/api/v1/agent/router.py
@router.post("/manus-run", response_model=Response)
async def manus_run(request: ManusRunRequest):
    # å¢åŠ è¶…æ—¶é™åˆ¶
    result = await asyncio.wait_for(
        agent.run_goal(request.goal, request.context),
        timeout=300  # 5 åˆ†é’Ÿ
    )
```

### æ–¹æ¡ˆ 3ï¼šä¼˜åŒ– Prompt

ä¿®æ”¹ Agent çš„ç³»ç»Ÿæç¤ºï¼Œè®©å®ƒæ›´å¿«åšå†³ç­–ï¼š

```python
# fastapi_app/agent/manus_agent.py
prompt = f"""
ä½ æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ä»»åŠ¡æ‰§è¡ŒåŠ©æ‰‹ã€‚è¯·å¿«é€Ÿåˆ†æç”¨æˆ·éœ€æ±‚å¹¶é€‰æ‹©åˆé€‚çš„å·¥å…·æ‰§è¡Œã€‚

ç”¨æˆ·ç›®æ ‡: {goal}

å¯ç”¨å·¥å…·:
- list_accounts: åˆ—å‡ºè´¦å·
- list_assets: åˆ—å‡ºç´ æ
- create_publish_plan: åˆ›å»ºå‘å¸ƒè®¡åˆ’
- call_api: è°ƒç”¨ä»»ä½• API

è¯·ç›´æ¥é€‰æ‹©å·¥å…·æ‰§è¡Œï¼Œä¸è¦è¿‡åº¦æ€è€ƒã€‚
"""
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### å½“å‰çŠ¶æ€
```
âœ… Agent åˆå§‹åŒ–æˆåŠŸ
âœ… å·¥å…·åŠ è½½æˆåŠŸï¼ˆ12ä¸ªï¼‰
âŒ æ‰§è¡Œè¶…æ—¶ï¼ˆæ¨¡å‹æ€è€ƒæ—¶é—´è¿‡é•¿ï¼‰
```

### æ¨èé…ç½®
```yaml
æ¨¡å‹: Qwen/Qwen2.5-72B-Instruct
æ¸©åº¦: 0.7
æœ€å¤§ Token: 4096
è¶…æ—¶: 60ç§’
```

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³æ‰§è¡Œ
1. **æ›´æ¢æ¨¡å‹ä¸º Qwen2.5-72B-Instruct**
2. **åœ¨å‰ç«¯æµ‹è¯• Agent æ¨¡å¼**
3. **éªŒè¯å·¥å…·è°ƒç”¨æ˜¯å¦æ­£å¸¸**

### æµ‹è¯•ç”¨ä¾‹
```
1. "åˆ—å‡ºæ‰€æœ‰è´¦å·"
   - åº”è¯¥è°ƒç”¨ list_accounts å·¥å…·
   - è¿”å›è´¦å·åˆ—è¡¨

2. "æŸ¥çœ‹æœ€æ–°çš„ 5 ä¸ªè§†é¢‘"
   - åº”è¯¥è°ƒç”¨ list_assets å·¥å…·
   - è¿”å›è§†é¢‘åˆ—è¡¨

3. "å¸®æˆ‘åˆ¶å®šä¸€ä¸ªå‘å¸ƒè®¡åˆ’"
   - åº”è¯¥ä¾æ¬¡è°ƒç”¨ï¼š
     * list_accountsï¼ˆè·å–è´¦å·ï¼‰
     * list_assetsï¼ˆè·å–ç´ æï¼‰
     * create_publish_planï¼ˆåˆ›å»ºè®¡åˆ’ï¼‰
```

## ğŸ“ ä»£ç æ–‡ä»¶æ¸…å•

### å·²ä¿®æ”¹çš„æ–‡ä»¶
1. `syn_frontend_react/src/components/ai-chat/chat-list.tsx` - UI å¤´åƒ
2. `syn_frontend_react/src/components/ai-chat/chat.tsx` - æ¬¢è¿æ¶ˆæ¯
3. `syn_backend/fastapi_app/agent/manus_tools.py` - è‡ªå®šä¹‰å·¥å…·
4. `syn_backend/fastapi_app/agent/manus_agent.py` - å·¥å…·åˆå§‹åŒ–

### æµ‹è¯•æ–‡ä»¶
1. `test_agent_simple.py` - ç®€å• API æµ‹è¯•
2. `test_manus_tools.py` - å·¥å…·å•å…ƒæµ‹è¯•

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### å‰ç«¯ä½¿ç”¨
```
1. æ‰“å¼€ http://localhost:3000/ai-agent
2. åˆ‡æ¢åˆ° "Agent" æ¨¡å¼
3. è¾“å…¥ï¼šåˆ—å‡ºæ‰€æœ‰è´¦å·
4. ç­‰å¾… Agent æ‰§è¡Œ
5. æŸ¥çœ‹ç»“æœ
```

### API ä½¿ç”¨
```python
import requests

response = requests.post(
    "http://localhost:7000/api/v1/agent/manus-run",
    json={
        "goal": "åˆ—å‡ºæ‰€æœ‰è´¦å·",
        "context": {}
    }
)

print(response.json())
```

## ğŸ” è°ƒè¯•ä¿¡æ¯

### æŸ¥çœ‹ Agent æ—¥å¿—
```bash
# åç«¯ç»ˆç«¯ä¼šæ˜¾ç¤ºï¼š
2025-12-02 17:23:44.237 | INFO | æ­£åœ¨åˆå§‹åŒ– OpenManus Agent...
2025-12-02 17:23:44.904 | INFO | OpenManus Agent åˆå§‹åŒ–æˆåŠŸ - Model: Qwen/QwQ-32B, å·¥å…·æ•°é‡: 12
2025-12-02 17:23:44.904 | INFO | ğŸš€ å¼€å§‹æ‰§è¡Œç›®æ ‡: åˆ—å‡ºæ‰€æœ‰è´¦å·
```

### å¸¸è§é”™è¯¯
1. **"name 'SaveScriptTool' is not defined"** - å·²ä¿®å¤
2. **"HTTP 500: Internal Server Error"** - æ£€æŸ¥åç«¯æ—¥å¿—
3. **"Read timed out"** - æ¨¡å‹å“åº”å¤ªæ…¢ï¼Œéœ€è¦æ›´æ¢æ¨¡å‹

---

**æ€»ç»“**ï¼šOpenManus Agent å·¥å…·ç³»ç»Ÿå·²ç»å®Œæ•´å®ç°ï¼Œä½†éœ€è¦æ›´æ¢ä¸ºæ›´å¿«çš„æ¨¡å‹æ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚æ¨èä½¿ç”¨ `Qwen/Qwen2.5-72B-Instruct`ã€‚
