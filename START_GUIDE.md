# SynapseAutomation æœåŠ¡å¯åŠ¨æŒ‡å—

## ğŸ“¦ å¿«é€Ÿå¯åŠ¨

### ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆæ¨èï¼‰

```bash
start_all_services.bat
```

è¿™å°†è‡ªåŠ¨å¯åŠ¨ï¼š
- âœ… Redis Server (ç«¯å£ 6379)
- âœ… Celery Worker (å‘å¸ƒä»»åŠ¡é˜Ÿåˆ—)
- âœ… Playwright Worker (æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œç«¯å£ 7001)
- âœ… FastAPI Backend (API æœåŠ¡ï¼Œç«¯å£ 7000)
- âœ… React Frontend (å‰ç«¯ç•Œé¢ï¼Œç«¯å£ 3000)

### åœæ­¢æ‰€æœ‰æœåŠ¡

```bash
stop_all_services.bat
```

---

## ğŸ”§ å•ç‹¬å¯åŠ¨æœåŠ¡

å¦‚æœåªéœ€è¦å¯åŠ¨éƒ¨åˆ†æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼š

### 1. Redis Server

```bash
redis-server
```

**å¿…é¡»æœ€å…ˆå¯åŠ¨**ï¼Œå…¶ä»–æœåŠ¡ä¾èµ– Redisã€‚

### 2. Celery Workerï¼ˆå‘å¸ƒä»»åŠ¡é˜Ÿåˆ—ï¼‰

```bash
start_celery_worker.bat
```

**ä½œç”¨ï¼š** å¤„ç†æ‰¹é‡å‘å¸ƒä»»åŠ¡ã€é—´éš”æ§åˆ¶ã€å¹¶å‘æ§åˆ¶ç­‰

**ä¾èµ–ï¼š** Redis

### 3. Playwright Workerï¼ˆæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼‰

```bash
scripts\launchers\start_worker.bat
```

**ä½œç”¨ï¼š** æ‰§è¡Œæµè§ˆå™¨è‡ªåŠ¨åŒ–æ“ä½œï¼ˆç™»å½•ã€å‘å¸ƒç­‰ï¼‰

**ç«¯å£ï¼š** 7001

### 4. FastAPI Backendï¼ˆåç«¯ APIï¼‰

```bash
scripts\launchers\start_backend.bat
```

**ä½œç”¨ï¼š** æä¾› RESTful API æœåŠ¡

**ç«¯å£ï¼š** 7000

**å¥åº·æ£€æŸ¥ï¼š** http://localhost:7000/health

### 5. React Frontendï¼ˆå‰ç«¯ç•Œé¢ï¼‰

```bash
scripts\launchers\start_frontend.bat
```

**ä½œç”¨ï¼š** Web ç”¨æˆ·ç•Œé¢

**ç«¯å£ï¼š** 3000

**è®¿é—®ï¼š** http://localhost:3000

---

## ğŸ“Š æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      React Frontend                         â”‚
â”‚                    (localhost:3000)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“ HTTP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FastAPI Backend                         â”‚
â”‚                    (localhost:7000)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Routes (å‘å¸ƒã€ç´ æã€è´¦å·ã€AIç­‰)                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                              â†“
    (HTTP è°ƒç”¨)                    (Celery ä»»åŠ¡é˜Ÿåˆ—)
           â†“                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Playwright Worker   â”‚     â”‚      Celery Worker           â”‚
â”‚   (localhost:7001)   â”‚     â”‚  (å‘å¸ƒä»»åŠ¡å¤„ç†)               â”‚
â”‚                      â”‚     â”‚  - é—´éš”æ§åˆ¶                   â”‚
â”‚  - æµè§ˆå™¨è‡ªåŠ¨åŒ–      â”‚     â”‚  - å¹¶å‘æ§åˆ¶                   â”‚
â”‚  - Cookie ç®¡ç†       â”‚     â”‚  - ä»»åŠ¡çŠ¶æ€ç®¡ç†               â”‚
â”‚  - å¹³å°å‘å¸ƒ          â”‚     â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†‘                              â†‘
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    Redis Server     â”‚
              â”‚  (localhost:6379)   â”‚
              â”‚                     â”‚
              â”‚  - ä»»åŠ¡é˜Ÿåˆ—         â”‚
              â”‚  - ä»»åŠ¡çŠ¶æ€         â”‚
              â”‚  - å¹¶å‘æ§åˆ¶         â”‚
              â”‚  - ç¼“å­˜æ•°æ®         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›  å¸¸è§é—®é¢˜

### 1. Redis è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
redis.exceptions.ConnectionError: Error 10061 connecting to localhost:6379
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å¯åŠ¨ Redis
redis-server
```

### 2. Celery Worker å¯åŠ¨å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
ModuleNotFoundError: No module named 'redis'
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
pip install redis hiredis celery[redis]
```

### 3. ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯ï¼š**
```
OSError: [WinError 10048] é€šå¸¸æ¯ä¸ªå¥—æ¥å­—åœ°å€åªå…è®¸ä½¿ç”¨ä¸€æ¬¡
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
stop_all_services.bat

# æˆ–æ‰‹åŠ¨æ€æ­»ç«¯å£
scripts\launchers\kill_port_7000.bat
scripts\launchers\kill_port_7001.bat
```

### 4. Playwright æµè§ˆå™¨æœªå®‰è£…

**é”™è¯¯ä¿¡æ¯ï¼š**
```
playwright._impl._api_types.Error: Executable doesn't exist
```

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å®‰è£… Chromium æµè§ˆå™¨
playwright install chromium

# æˆ–ä½¿ç”¨è‡ªåŠ¨å®‰è£…è„šæœ¬
scripts\launchers\install_playwright.bat
```

---

## ğŸ“ å¼€å‘æ¨¡å¼ vs ç”Ÿäº§æ¨¡å¼

### å¼€å‘æ¨¡å¼ï¼ˆå½“å‰é…ç½®ï¼‰

```bash
# çƒ­æ›´æ–°å¯ç”¨
# æ—¥å¿—çº§åˆ«: DEBUG
start_all_services.bat
```

**ç‰¹ç‚¹ï¼š**
- âœ… ä»£ç ä¿®æ”¹è‡ªåŠ¨é‡è½½
- âœ… è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- âœ… æ¯ä¸ªæœåŠ¡ç‹¬ç«‹çª—å£ï¼Œæ–¹ä¾¿è°ƒè¯•

### ç”Ÿäº§æ¨¡å¼ï¼ˆæœªæ¥ï¼‰

```bash
# ä½¿ç”¨ Docker Compose æˆ– systemd
docker-compose up -d
```

**ç‰¹ç‚¹ï¼š**
- âœ… åå°è¿è¡Œ
- âœ… è‡ªåŠ¨é‡å¯
- âœ… æ—¥å¿—æŒä¹…åŒ–
- âœ… èµ„æºé™åˆ¶

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### Celery Worker å¹¶å‘é…ç½®

**å½“å‰é…ç½®ï¼š**
```bash
--pool=solo --concurrency=3
```

**ä¼˜åŒ–å»ºè®®ï¼š**
- **å•æœºæµ‹è¯•ï¼š** `--pool=solo --concurrency=3`ï¼ˆå½“å‰ï¼‰
- **å¤šæ ¸ä¼˜åŒ–ï¼š** `--pool=prefork --concurrency=8`
- **é«˜å¹¶å‘ï¼š** `--pool=gevent --concurrency=100`

**ä¿®æ”¹æ–¹å¼ï¼š**
ç¼–è¾‘ `start_celery_worker.bat` ç¬¬39-43è¡Œ

### Redis ä¼˜åŒ–

**é…ç½®æ–‡ä»¶ï¼š** `redis.conf`

**å»ºè®®é…ç½®ï¼š**
```conf
maxmemory 2gb
maxmemory-policy allkeys-lru
save 900 1
save 300 10
save 60 10000
```

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [Celery è¿ç§»æ–‡æ¡£](./CELERY_MIGRATION.md)
- [å¹¶å‘æ§åˆ¶è¯´æ˜](./CONCURRENCY_CONTROL.md)
- [é—´éš”æ§åˆ¶è¯´æ˜](./INTERVAL_CONTROL.md)
- [æ¶æ„è®¾è®¡æ–‡æ¡£](./CLAUDE.md)

---

## ğŸ”„ æœåŠ¡çŠ¶æ€æ£€æŸ¥

### å¥åº·æ£€æŸ¥ç«¯ç‚¹

| æœåŠ¡ | ç«¯ç‚¹ | é¢„æœŸå“åº” |
|------|------|----------|
| FastAPI Backend | http://localhost:7000/health | `{"status": "ok"}` |
| Playwright Worker | http://localhost:7001/health | `{"status": "healthy"}` |
| Redis | `redis-cli ping` | `PONG` |
| Celery Worker | æŸ¥çœ‹æ—¥å¿—çª—å£ | æ— é”™è¯¯ä¿¡æ¯ |

### æ£€æŸ¥è„šæœ¬

```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡
curl http://localhost:7000/health
curl http://localhost:7001/health
redis-cli ping
```

---

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡è¿è¡Œï¼š** ç¡®ä¿å·²å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š
   ```bash
   pip install -r requirements.txt
   playwright install chromium
   ```

2. **å®šæœŸç»´æŠ¤ï¼š** é‡å¯æœåŠ¡ä»¥æ¸…ç†å†…å­˜ï¼š
   ```bash
   stop_all_services.bat
   start_all_services.bat
   ```

3. **æŸ¥çœ‹æ—¥å¿—ï¼š** æ¯ä¸ªæœåŠ¡åœ¨ç‹¬ç«‹çª—å£è¿è¡Œï¼Œåˆ‡æ¢çª—å£æŸ¥çœ‹æ—¥å¿—

4. **è°ƒè¯•æ¨¡å¼ï¼š** ä¿®æ”¹ `.env` æ–‡ä»¶è®¾ç½®æ—¥å¿—çº§åˆ«ï¼š
   ```env
   LOG_LEVEL=DEBUG
   ```

---

## ğŸ“ è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜ï¼Ÿ

- ğŸ“– æŸ¥çœ‹æ–‡æ¡£ï¼š`./CELERY_MIGRATION.md`ã€`./CONCURRENCY_CONTROL.md`
- ğŸ” æ£€æŸ¥æ—¥å¿—ï¼šåˆ‡æ¢åˆ°å„æœåŠ¡çª—å£æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
- ğŸ› æäº¤ Issueï¼šhttps://github.com/your-repo/issues
