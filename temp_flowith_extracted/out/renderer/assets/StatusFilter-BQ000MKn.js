import { j as jsxRuntimeExports, r as reactExports } from "./client-DljuHW-m.js";
import { c as create, u as useThemeStore } from "./themeBridge-XpPGWB57.js";
import { c as cn } from "./utils-C6LcAPXa.js";
import { b as formatBytes } from "./format-CX3JBwaj.js";
import { u as useTranslation } from "./useTranslation-BBDPFRa4.js";
import { m as motion } from "./proxy-BWWQsHt4.js";
import { a as SquareCheckBig, b as Square, T as Trash2 } from "./trash-2-0o5iz-Pa.js";
import { c as createLucideIcon } from "./createLucideIcon-Dg7FO9tW.js";
import { X } from "./x-Xqx6LWQK.js";
import { C as CircleCheckBig, D as Download } from "./download-0fN9YWaY.js";
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$d = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m4.9 4.9 14.2 14.2", key: "1m5liu" }]
];
const Ban = createLucideIcon("ban", __iconNode$d);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$c = [
  ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }],
  ["path", { d: "m15 9-6 6", key: "1uzhvr" }],
  ["path", { d: "m9 9 6 6", key: "z0biqf" }]
];
const CircleX = createLucideIcon("circle-x", __iconNode$c);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$b = [
  ["path", { d: "M10 12v-1", key: "v7bkov" }],
  ["path", { d: "M10 18v-2", key: "1cjy8d" }],
  ["path", { d: "M10 7V6", key: "dljcrl" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  [
    "path",
    { d: "M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01", key: "gkbcor" }
  ],
  ["circle", { cx: "10", cy: "20", r: "2", key: "1xzdoj" }]
];
const FileArchive = createLucideIcon("file-archive", __iconNode$b);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$a = [
  ["path", { d: "M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3", key: "rslqgf" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  [
    "path",
    {
      d: "M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",
      key: "9f7x3i"
    }
  ]
];
const FileAudio = createLucideIcon("file-audio", __iconNode$a);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$9 = [
  ["path", { d: "M10 12.5 8 15l2 2.5", key: "1tg20x" }],
  ["path", { d: "m14 12.5 2 2.5-2 2.5", key: "yinavb" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z", key: "1mlx9k" }]
];
const FileCode = createLucideIcon("file-code", __iconNode$9);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$8 = [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["circle", { cx: "10", cy: "12", r: "2", key: "737tya" }],
  ["path", { d: "m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22", key: "wt3hpn" }]
];
const FileImage = createLucideIcon("file-image", __iconNode$8);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$7 = [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["path", { d: "M8 13h2", key: "yr2amv" }],
  ["path", { d: "M14 13h2", key: "un5t4a" }],
  ["path", { d: "M8 17h2", key: "2yhykz" }],
  ["path", { d: "M14 17h2", key: "10kma7" }]
];
const FileSpreadsheet = createLucideIcon("file-spreadsheet", __iconNode$7);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$6 = [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["path", { d: "M10 9H8", key: "b1mrlr" }],
  ["path", { d: "M16 13H8", key: "t4e002" }],
  ["path", { d: "M16 17H8", key: "z1uh3a" }]
];
const FileText = createLucideIcon("file-text", __iconNode$6);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$5 = [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }],
  ["path", { d: "m10 11 5 3-5 3v-6Z", key: "7ntvm4" }]
];
const FileVideo = createLucideIcon("file-video", __iconNode$5);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$4 = [
  ["path", { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z", key: "1rqfz7" }],
  ["path", { d: "M14 2v4a2 2 0 0 0 2 2h4", key: "tnqrlb" }]
];
const File = createLucideIcon("file", __iconNode$4);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$3 = [
  [
    "path",
    {
      d: "m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",
      key: "usdka0"
    }
  ]
];
const FolderOpen = createLucideIcon("folder-open", __iconNode$3);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$2 = [
  ["path", { d: "M12 2v4", key: "3427ic" }],
  ["path", { d: "m16.2 7.8 2.9-2.9", key: "r700ao" }],
  ["path", { d: "M18 12h4", key: "wj9ykh" }],
  ["path", { d: "m16.2 16.2 2.9 2.9", key: "1bxg5t" }],
  ["path", { d: "M12 18v4", key: "jadmvz" }],
  ["path", { d: "m4.9 19.1 2.9-2.9", key: "bwix9q" }],
  ["path", { d: "M2 12h4", key: "j09sii" }],
  ["path", { d: "m4.9 4.9 2.9 2.9", key: "giyufr" }]
];
const Loader = createLucideIcon("loader", __iconNode$2);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode$1 = [
  ["rect", { x: "14", y: "4", width: "4", height: "16", rx: "1", key: "zuxfzm" }],
  ["rect", { x: "6", y: "4", width: "4", height: "16", rx: "1", key: "1okwgv" }]
];
const Pause = createLucideIcon("pause", __iconNode$1);
/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const __iconNode = [["polygon", { points: "6 3 20 12 6 21 6 3", key: "1oa8hb" }]];
const Play = createLucideIcon("play", __iconNode);
const useDownloadStore = create((set, get) => ({
  // State
  items: [],
  stats: null,
  isLoading: false,
  error: null,
  selectedIds: /* @__PURE__ */ new Set(),
  // Actions
  loadDownloads: async () => {
    set({ isLoading: true, error: null });
    try {
      const items = await window.downloadAPI.getAll();
      set({ items, isLoading: false });
      await get().loadStats();
    } catch (error) {
      const errorMsg = error instanceof Error ? error.message : "Failed to load downloads";
      set({ error: errorMsg, isLoading: false });
      console.error("[DownloadStore] Failed to load downloads:", error);
    }
  },
  loadStats: async () => {
    try {
      const stats = await window.downloadAPI.getStats();
      set({ stats });
    } catch (error) {
      console.error("[DownloadStore] Failed to load stats:", error);
    }
  },
  updateProgress: (progress) => {
    set((state) => ({
      items: state.items.map(
        (item) => item.id === progress.id ? { ...item, downloadedBytes: progress.downloadedBytes } : item
      )
    }));
  },
  updateDownloadStatus: (id, updates) => {
    set((state) => ({
      items: state.items.map(
        (item) => item.id === id ? { ...item, ...updates } : item
      )
    }));
  },
  pauseDownload: async (id) => {
    try {
      const success = await window.downloadAPI.pause(id);
      if (success) {
        get().updateDownloadStatus(id, { state: "paused" });
      }
    } catch (error) {
      console.error("[DownloadStore] Failed to pause download:", error);
    }
  },
  resumeDownload: async (id) => {
    try {
      const success = await window.downloadAPI.resume(id);
      if (success) {
        get().updateDownloadStatus(id, { state: "progressing" });
      }
    } catch (error) {
      console.error("[DownloadStore] Failed to resume download:", error);
    }
  },
  cancelDownload: async (id) => {
    try {
      await window.downloadAPI.cancel(id);
    } catch (error) {
      console.error("[DownloadStore] Failed to cancel download:", error);
    }
  },
  removeDownload: async (id) => {
    try {
      await window.downloadAPI.remove(id);
      set((state) => ({
        items: state.items.filter((item) => item.id !== id)
      }));
      await get().loadStats();
    } catch (error) {
      console.error("[DownloadStore] Failed to remove download:", error);
    }
  },
  removeBatchDownloads: async (ids) => {
    try {
      await window.downloadAPI.removeBatch(ids);
      set((state) => ({
        items: state.items.filter((item) => !ids.includes(item.id)),
        selectedIds: /* @__PURE__ */ new Set()
      }));
      await get().loadStats();
    } catch (error) {
      console.error("[DownloadStore] Failed to remove downloads:", error);
    }
  },
  clearAllDownloads: async () => {
    try {
      await window.downloadAPI.clearAll();
      set({ items: [], selectedIds: /* @__PURE__ */ new Set() });
      await get().loadStats();
    } catch (error) {
      console.error("[DownloadStore] Failed to clear downloads:", error);
    }
  },
  openFile: async (path) => {
    try {
      await window.downloadAPI.openFile(path);
    } catch (error) {
      console.error("[DownloadStore] Failed to open file:", error);
    }
  },
  showInFolder: async (path) => {
    try {
      await window.downloadAPI.showInFolder(path);
    } catch (error) {
      console.error("[DownloadStore] Failed to show in folder:", error);
    }
  },
  toggleSelect: (id) => {
    set((state) => {
      const newSelectedIds = new Set(state.selectedIds);
      if (newSelectedIds.has(id)) {
        newSelectedIds.delete(id);
      } else {
        newSelectedIds.add(id);
      }
      return { selectedIds: newSelectedIds };
    });
  },
  selectAll: () => {
    set((state) => ({
      selectedIds: new Set(state.items.map((item) => item.id))
    }));
  },
  clearSelection: () => {
    set({ selectedIds: /* @__PURE__ */ new Set() });
  },
  setError: (error) => {
    set({ error });
  }
}));
const DownloadItemComponent = ({ item, mode }) => {
  const { t } = useTranslation();
  const {
    pauseDownload,
    resumeDownload,
    cancelDownload,
    removeDownload,
    openFile,
    showInFolder,
    toggleSelect,
    selectedIds
  } = useDownloadStore();
  const isSelected = selectedIds.has(item.id);
  const isProgressing = item.state === "progressing" || item.state === "paused";
  const percent = item.fileSize > 0 ? item.downloadedBytes / item.fileSize * 100 : 0;
  const handlePause = (e) => {
    e.stopPropagation();
    pauseDownload(item.id);
  };
  const handleResume = (e) => {
    e.stopPropagation();
    resumeDownload(item.id);
  };
  const handleCancel = (e) => {
    e.stopPropagation();
    cancelDownload(item.id);
  };
  const handleDelete = (e) => {
    e.stopPropagation();
    removeDownload(item.id);
  };
  const handleOpenFile = (e) => {
    e.stopPropagation();
    if (item.state === "completed") {
      openFile(item.savePath);
    }
  };
  const handleShowInFolder = (e) => {
    e.stopPropagation();
    showInFolder(item.savePath);
  };
  const handleToggleSelect = (e) => {
    e.stopPropagation();
    toggleSelect(item.id);
  };
  const formatTime = (timestamp) => {
    const date = new Date(timestamp);
    return date.toLocaleTimeString("en-US", {
      hour: "2-digit",
      minute: "2-digit",
      hour12: true
    });
  };
  const getFileIcon = () => {
    const ext = item.filename.split(".").pop()?.toLowerCase();
    if (["jpg", "jpeg", "png", "gif", "webp", "svg", "bmp", "ico"].includes(ext || "")) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(FileImage, { className: "w-5 h-5 text-blue-500" });
    }
    if (["mp4", "avi", "mkv", "mov", "wmv", "flv", "webm", "m4v"].includes(ext || "")) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(FileVideo, { className: "w-5 h-5 text-purple-500" });
    }
    if (["mp3", "wav", "flac", "aac", "m4a", "ogg", "wma"].includes(ext || "")) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(FileAudio, { className: "w-5 h-5 text-green-500" });
    }
    if (["zip", "rar", "7z", "tar", "gz", "bz2", "xz"].includes(ext || "")) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(FileArchive, { className: "w-5 h-5 text-orange-500" });
    }
    if (["js", "ts", "jsx", "tsx", "py", "java", "cpp", "c", "go", "rs", "php", "rb", "swift"].includes(ext || "")) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(FileCode, { className: "w-5 h-5 text-indigo-500" });
    }
    if (["txt", "md", "pdf", "doc", "docx"].includes(ext || "")) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(FileText, { className: "w-5 h-5 text-gray-500" });
    }
    if (["csv", "xlsx", "xls"].includes(ext || "")) {
      return /* @__PURE__ */ jsxRuntimeExports.jsx(FileSpreadsheet, { className: "w-5 h-5 text-emerald-500" });
    }
    return /* @__PURE__ */ jsxRuntimeExports.jsx(File, { className: "w-5 h-5 text-black-caption dark:text-black-60" });
  };
  const getStatusIcon = () => {
    switch (item.state) {
      case "completed":
        return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleCheckBig, { className: "w-4 h-4 text-green-500" });
      case "failed":
        return /* @__PURE__ */ jsxRuntimeExports.jsx(CircleX, { className: "w-4 h-4 text-red-500" });
      case "cancelled":
        return /* @__PURE__ */ jsxRuntimeExports.jsx(Ban, { className: "w-4 h-4 text-orange-500" });
      default:
        return null;
    }
  };
  return /* @__PURE__ */ jsxRuntimeExports.jsxs(
    motion.div,
    {
      initial: { opacity: 0 },
      animate: { opacity: 1 },
      exit: { opacity: 0 },
      transition: {
        duration: 0.2,
        ease: [0.22, 1, 0.36, 1]
      },
      className: cn(
        "relative flex flex-col gap-2 px-4 py-3 rounded-lg cursor-pointer transition-all duration-200",
        mode === "dark" ? "hover:bg-black-20/40" : "hover:bg-black-95"
      ),
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-3", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx("button", { onClick: handleToggleSelect, className: "flex-shrink-0", children: isSelected ? /* @__PURE__ */ jsxRuntimeExports.jsx(
            SquareCheckBig,
            {
              className: cn(
                "w-4 h-4",
                mode === "dark" ? "text-indigo-400" : "text-indigo-600"
              )
            }
          ) : /* @__PURE__ */ jsxRuntimeExports.jsx(Square, { className: "w-4 h-4 text-black-caption dark:text-black-60" }) }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "flex-shrink-0", children: getFileIcon() }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-baseline gap-2 mb-0.5", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "h3",
                {
                  className: "text-sm font-medium truncate",
                  onClick: handleOpenFile,
                  children: item.filename
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "text-xs text-black-caption dark:text-black-60 whitespace-nowrap", children: formatTime(item.startTime) })
            ] }),
            /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2 text-xs text-black-secondary dark:text-black-light", children: [
              /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
                formatBytes(item.downloadedBytes),
                " / ",
                formatBytes(item.fileSize)
              ] }),
              getStatusIcon(),
              item.state === "failed" && item.error && /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { className: "text-red-500", children: [
                "(",
                item.error,
                ")"
              ] })
            ] })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex-shrink-0 flex items-center gap-1", children: [
            isProgressing && /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
              item.state === "paused" ? /* @__PURE__ */ jsxRuntimeExports.jsx(
                "button",
                {
                  onClick: handleResume,
                  className: cn(
                    "p-2 rounded-lg transition-colors",
                    mode === "dark" ? "hover:bg-black-20/60" : "hover:bg-black-90"
                  ),
                  title: t("actions.resume"),
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(Play, { className: "w-4 h-4 text-green-500" })
                }
              ) : /* @__PURE__ */ jsxRuntimeExports.jsx(
                "button",
                {
                  onClick: handlePause,
                  className: cn(
                    "p-2 rounded-lg transition-colors",
                    mode === "dark" ? "hover:bg-black-20/60" : "hover:bg-black-90"
                  ),
                  title: t("actions.pause"),
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(Pause, { className: "w-4 h-4 text-orange-500" })
                }
              ),
              /* @__PURE__ */ jsxRuntimeExports.jsx(
                "button",
                {
                  onClick: handleCancel,
                  className: cn(
                    "p-2 rounded-lg transition-colors hover:bg-red-500/10 hover:text-red-500"
                  ),
                  title: t("actions.cancel"),
                  children: /* @__PURE__ */ jsxRuntimeExports.jsx(X, { className: "w-4 h-4" })
                }
              )
            ] }),
            item.state === "completed" && /* @__PURE__ */ jsxRuntimeExports.jsx(
              "button",
              {
                onClick: handleShowInFolder,
                className: cn(
                  "p-2 rounded-lg transition-colors",
                  mode === "dark" ? "hover:bg-black-20/60" : "hover:bg-black-90"
                ),
                title: t("actions.showInFolder"),
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(FolderOpen, { className: "w-4 h-4 text-black-secondary dark:text-black-light" })
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              "button",
              {
                onClick: handleDelete,
                className: cn(
                  "p-2 rounded-lg transition-colors hover:bg-red-500/10 hover:text-red-500"
                ),
                title: t("common.delete"),
                children: /* @__PURE__ */ jsxRuntimeExports.jsx(Trash2, { className: "w-4 h-4" })
              }
            )
          ] })
        ] }),
        isProgressing && /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "ml-9", children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "div",
            {
              className: cn(
                "h-1.5 rounded-full overflow-hidden",
                mode === "dark" ? "bg-black-20/60" : "bg-black-90"
              ),
              children: /* @__PURE__ */ jsxRuntimeExports.jsx(
                motion.div,
                {
                  className: cn(
                    "h-full rounded-full",
                    item.state === "paused" ? "bg-orange-500" : mode === "dark" ? "bg-indigo-400" : "bg-indigo-600"
                  ),
                  initial: { width: 0 },
                  animate: { width: `${percent}%` },
                  transition: { duration: 0.3 }
                }
              )
            }
          ),
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center justify-between mt-1 text-xs text-black-caption dark:text-black-60", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { children: [
              Math.round(percent),
              "%"
            ] }),
            item.state === "paused" && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: t("status.paused") })
          ] })
        ] })
      ]
    }
  );
};
const DownloadList = ({ items }) => {
  const { t } = useTranslation();
  const mode = useThemeStore((s) => s.mode);
  const grouped = reactExports.useMemo(() => {
    const now = Date.now();
    const startOfToday = new Date(now).setHours(0, 0, 0, 0);
    const startOfYesterday = startOfToday - 24 * 60 * 60 * 1e3;
    const result = {
      progressing: [],
      today: [],
      yesterday: [],
      earlier: []
    };
    items.forEach((item) => {
      if (item.state === "progressing" || item.state === "paused") {
        result.progressing.push(item);
      } else if (item.startTime >= startOfToday) {
        result.today.push(item);
      } else if (item.startTime >= startOfYesterday) {
        result.yesterday.push(item);
      } else {
        result.earlier.push(item);
      }
    });
    return result;
  }, [items]);
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "px-6 py-4 space-y-8", children: [
    grouped.progressing.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsx(DownloadGroup, { title: t("downloads.inProgress"), items: grouped.progressing, mode }),
    grouped.today.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsx(DownloadGroup, { title: t("time.today"), items: grouped.today, mode }),
    grouped.yesterday.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsx(DownloadGroup, { title: t("time.yesterday"), items: grouped.yesterday, mode }),
    grouped.earlier.length > 0 && /* @__PURE__ */ jsxRuntimeExports.jsx(DownloadGroup, { title: t("time.earlier"), items: grouped.earlier, mode })
  ] });
};
const DownloadGroup = ({ title, items, mode }) => {
  return /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx("h2", { className: "text-xs font-semibold uppercase tracking-wider text-black-caption dark:text-black-60 mb-3", children: title }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "space-y-1", children: items.map((item) => /* @__PURE__ */ jsxRuntimeExports.jsx(DownloadItemComponent, { item, mode }, item.id)) })
  ] });
};
const STATUS_OPTIONS = [
  {
    value: "all",
    labelKey: "downloads.all",
    icon: Download,
    getCount: (stats) => stats?.total || 0
  },
  {
    value: "progressing",
    labelKey: "downloads.inProgress",
    icon: Loader,
    getCount: (stats) => stats?.progressing || 0
  },
  {
    value: "completed",
    labelKey: "downloads.completed",
    icon: CircleCheckBig,
    getCount: (stats) => stats?.completed || 0
  },
  {
    value: "failed",
    labelKey: "status.failed",
    icon: CircleX,
    getCount: (stats) => stats?.failed || 0
  },
  {
    value: "cancelled",
    labelKey: "status.cancelled",
    icon: Ban,
    getCount: (stats) => stats?.cancelled || 0
  }
];
const StatusFilter = ({
  activeStatus,
  onStatusSelect,
  stats
}) => {
  const { t } = useTranslation();
  const mode = useThemeStore((s) => s.mode);
  return /* @__PURE__ */ jsxRuntimeExports.jsx("div", { className: "p-4 space-y-1", children: STATUS_OPTIONS.map((option) => {
    const Icon = option.icon;
    const count = option.getCount(stats);
    const isActive = activeStatus === option.value;
    return /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        onClick: () => onStatusSelect(option.value),
        className: cn(
          "w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm transition-colors",
          isActive ? mode === "dark" ? "bg-indigo-500/20 text-indigo-400" : "bg-indigo-500/10 text-indigo-600" : mode === "dark" ? "hover:bg-black-20/40 text-black-95" : "hover:bg-black-95 text-black-primary"
        ),
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsxs("div", { className: "flex items-center gap-2", children: [
            /* @__PURE__ */ jsxRuntimeExports.jsx(
              Icon,
              {
                className: cn(
                  "w-4 h-4",
                  isActive ? mode === "dark" ? "text-indigo-400" : "text-indigo-600" : "text-black-caption dark:text-black-60"
                )
              }
            ),
            /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "font-medium", children: t(option.labelKey) })
          ] }),
          /* @__PURE__ */ jsxRuntimeExports.jsx(
            "span",
            {
              className: cn(
                "text-xs px-2 py-0.5 rounded-full",
                isActive ? mode === "dark" ? "bg-indigo-500/30 text-indigo-300" : "bg-indigo-500/20 text-indigo-700" : mode === "dark" ? "bg-black-20/60 text-black-60" : "bg-black-90 text-black-caption"
              ),
              children: count
            }
          )
        ]
      },
      option.value
    );
  }) });
};
export {
  DownloadList as D,
  StatusFilter as S,
  useDownloadStore as u
};
